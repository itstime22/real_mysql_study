### 3주차 질문 정리

- **언두 로그의 크기와 언두 테이블스페이스 개수의 비율은 어떻게 설정되어야 이상적일까?**
    - 언두 로그 크기: 1GB
    - 언두 테이블스페이스 개수: 기본값 1GB 2개, 수동으로는 3개인데 다룰 필요가 없을 것 같다.
- **Undo Purge와 Undo Tablespace Truncate의 상관관계**
    - Undo Tablespace Truncate: 특정 테이블스페이스 크기를 넘었을 때, 즉, 임계값을 넘었을 때 운영체제의 공간 자체를 반환
    - Undo Purge: 물리적 공간은 반환을 안하는데, 주기적으로 Purge를 시켜서 그 공간을 정리를 해주다가 (트랜잭션 완료) 임계값을 넘기면 Truncate.
        - 트랜잭션이 완료될때마다 Purge하는 건 아니고 임계값을 넘기면 하는 것.
- **Undo Purge가 주기적으로 발생한다고 했는데, 정확한 시점은 언제인가?**
    - 제대로 안 나와있어서 추후 찾아보기.
- **리두 로그가 주기적으로 디스크에 동기화되는데, 이 과정에서 `해당 트랜잭션에서 변경한 데이터가 사라질 수 있다`라는 문구가 잘 이해되지 않습니다.**
    - 디스크에서 해당 리두 로그를 사용할 필요가 없기 때문에 삭제
- **어댑티브 해시 인덱스를 사용해도 좋은 이유 중 하나가 `쿼리가 일부 데이터에서만 집중되는 경우`라는 이유에 대해 궁금합니다.**
    - 어댑티브 해시 인덱스를 사용할 때 좋은 경우는 디스크 크기와 사용하는 메모리 크기가 비슷할 때 좋다. 그 이유랑 똑같음. 디스크에서 값을 가져오는 것이다 보니 쿼리 여러 개가 다양하게 돌면 계속 디스크에서 업데이트를 해줘야 하므로 일부 데이터에만 집중되는게 좀 더 효과가 좋다.
    - 어댑티브 해시 인덱스는 버퍼 풀에서 가져오는 거 아닌가요?
        - 버퍼 풀에 있는 값도 결국엔 디스크에서 가져와야 하기 때문에 결국 같은 얘기다.
- **MySQL 로그 파일을 통해 MySQL의 상태나 부하를 일으키는 원인을 쉽게 찾아서 해결할 수 있다고 합니다. 실제로 MySQL 로그 파일을 통해 디버깅 경험이나 활용 경험이 있으신지 궁금하고, 어떤 상황에 확인해보면 유용하게 사용할 수 있을지 알고 싶습니다.**
    - 슬로우 쿼리 로그 관련해서 Percona Toolkit 사용하면 좋다해서 사용하려고 했는데, 해당 슬로우 쿼리 로그가 OFF인게 기본값이였다. 그래서 좀 더 사용해봐야할 것 같다.
    - 쿼리를 최적화해야겠다는 걸 찾을 때, 슬로우 쿼리를 찍어보면 쿼리가 완료된 시간, 쿼리가 돌아간 시간, 총 작업 시간, 이 작업을 하는 동안 레코드를 몇 개 접근했는지, 찾은 레코드 수 이런 값들이 있는데 만약 **접근한 레코드 수가 찾은 레코드 수에 비해 너무 많다? 그러면 그걸 보고 나서 이 쿼리는 좀 최적화를 하는게 좋다는 판단을 하면 좋다.**
    - 해당 로그 파일에 파일이 수정될 때 슬로우 로그 쿼리에 쿼리가 발생한 거니까 파일이 수정됨을 인식해서 슬랙이나 디코에서 훅 등으로 알림 가는 기능이 있으면 좋겠다.